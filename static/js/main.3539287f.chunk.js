(this.webpackJsonponlyconnect=this.webpackJsonponlyconnect||[]).push([[0],{15:function(e,n,t){},16:function(e,n,t){},17:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(1),c=t.n(o),u=t(8),a=t.n(u),i=(t(15),t(3)),s=t(7),l=t(5),f=function(e){var n=e.coreSquare,t=e.index,o=e.onChange,c=e.onSelect;if(o){return Object(r.jsx)("div",{className:"square",children:Object(r.jsx)("input",{type:"text",value:n.clue,onChange:function(e){o(t,e.target.value)}})})}if(c){var u="square";return n.selected&&(u+=" selected"),n.badGuess&&(u+=" bad-guess"),n.solvedGroup&&(u+=" group"+n.solvedGroup),Object(r.jsx)("div",{onClick:function(){c(t)},className:u,children:n.clue})}throw Error("Oops")},d=function(e){var n=e.coreSquares,t=e.onChange,o=e.onSelect;return Object(r.jsx)("div",{className:"wall",children:n.map((function(e,n){return Object(r.jsx)(f,{index:n,coreSquare:e,onChange:t,onSelect:o},n.toString())}))})},v=t(9);var h=function(){function e(){Object(l.a)(this,e)}return Object(v.a)(e,null,[{key:"doInt",value:function(e){var n=e*this.prime+Math.floor(Math.random()*this.prime);if(this.undoInt(n)!==e)throw new Error("DumbEncypt.doInt Cannot encrypt ".concat(e));return n}},{key:"undoInt",value:function(e){return Math.floor(e/this.prime)}}]),e}();h.prime=19793;t(16);function p(e){return Math.floor(e/4)+1}var b=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(l.a)(this,e),this.answerGroup=void 0,this.clue=void 0,this.selected=!1,this.badGuess=!1,this.solvedGroup=null,this.answerGroup=n,this.clue=t};var j,g=[];function w(e,n){!function(e,n){for(var t=0;t<e.length;++t){var r=p(t),o=e[t].solvedGroup;if(r<n){if(r!==o)throw new Error("square ".concat(t," is not in solved group ").concat(r));if(o>n)throw new Error("square ".concat(t," is in unexpected solved fron ").concat(o))}}}(e,n);for(var t=0;t<e.length;++t){if(e[t].solvedGroup===n&&p(t)!==n){var r=e.findIndex((function(e){return!e.solvedGroup}));if(p(r)!==n)throw new Error("Bah! Something has gone wrong");var o=[e[r],e[t]];e[t]=o[0],e[r]=o[1]}}}!function(){var e=new URLSearchParams(window.location.search),n=function(e){var n=e.get("clues");if(n){var t=n.split("~");if(16===t.length)return t;console.log("Did not find the expected number of clues",t)}return null}(e),t=function(e){var n=null,t=e.get("key");if(t){var r=h.undoInt(parseInt(t));n=[];for(var o=0;o<16;++o){var c=r%4;r=(r-c)/4,n.push(c)}n.reverse();for(var u=function(e){4!==n.filter((function(n){return n===e})).length&&(console.log("Cannot interpret urlKey",t),n=null)},a=0;n&&a<4;++a)u(a)}return n}(e);if(j=!1,n&&t){j=!0;for(var r=0;r<16;++r)g.push(new b(t[r],n[r]))}else{e.toString()&&alert("Could not understand URL parameters");for(var o=0;o<4;++o)for(var c=0;c<4;++c){var u=new b(o);g.push(u)}}}();var O=function(){var e=Object(o.useState)(g),n=Object(s.a)(e,2),t=n[0],c=n[1],u=Object(o.useState)(0),a=Object(s.a)(u,2),l=a[0],f=a[1];Object(o.useEffect)((function(){document.title="OnlyConnect"}));var v=function(){var e=function(e){var n=new URLSearchParams,t="";e.forEach((function(e){return t+=e.clue+"~"})),n.append("clues",t.slice(0,-1));var r=0;e.forEach((function(e){return r=4*r+e.answerGroup}));var o=h.doInt(r);return n.append("key",o.toString()),n}(function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),r=[e[t],e[n]];e[n]=r[0],e[t]=r[1]}return e}(Object(i.a)(t)));window.open(window.location.href+"?"+e.toString())},p=Boolean(t.find((function(e){return e.badGuess}))),b=function(){return Object(r.jsx)("button",{type:"button",onClick:function(){var e=Object(i.a)(t);e.forEach((function(e){return e.badGuess=!1})),c(e)},children:"Clear incorrect guess"})},O=function(){return Object(r.jsx)("button",{type:"button",onClick:v,children:"Done"})};return Object(r.jsxs)("div",{className:"onlyconnect",children:[Object(r.jsx)(d,{coreSquares:t,onSelect:function(e){if(j&&!t[e].solvedGroup){var n=Object(i.a)(t);n.forEach((function(e){return e.badGuess=!1})),n[e].selected=!n[e].selected;var r=n.filter((function(e){return e.selected}));if(r.find((function(e){return e.solvedGroup})))throw new Error("Selected square is already solved");if(4===r.length)if(r.forEach((function(e){return e.selected=!1})),r.every((function(e){return e.answerGroup===r[0].answerGroup}))){var o=l+1;f(o),r.forEach((function(e){return e.solvedGroup=o})),w(n,o),o+1===4&&(n.forEach((function(e){e.solvedGroup||(e.solvedGroup=4)})),f(4))}else r.forEach((function(e){return e.badGuess=!0}));c(n)}},onChange:j?void 0:function(e,n){var r=Object(i.a)(t);r[e].clue=n.replace(/~/g,""),c(r)}}),Object(r.jsxs)("div",{className:"controls",children:[j?null:Object(r.jsx)(O,{}),p?Object(r.jsx)(b,{}):null]})]})},G=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,18)).then((function(n){var t=n.getCLS,r=n.getFID,o=n.getFCP,c=n.getLCP,u=n.getTTFB;t(e),r(e),o(e),c(e),u(e)}))};a.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(O,{})}),document.getElementById("root")),G()}},[[17,1,2]]]);
//# sourceMappingURL=main.3539287f.chunk.js.map